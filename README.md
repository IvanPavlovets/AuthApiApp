# ТЗ
* Используя SpringBoot создать api аутентификации:<br>

* Метод принимает пароль и юзернейм и добавляет их в сессионный кэш одной строкой (желательно в безопасном виде)<br>

* Метод принимает пароль или хэш пароля и проверяет есть ли в кэше данный юзер и возвращает да/нет <br>

* Написать юнит тесты на оба метода<br>

* В ридми добавить тестовые данные для проверки апи через постман и пара слов о выбранном решение<br>
Прислать  ссылку на гит, где лежит выполненное задание)<br>

# Описание 

 По ТЗ указанно "создать api" это скорее всего иметься ввиду создать REST api
(речь идет НЕ про обычный @Controller, который взаимодействует с MVC представлением/html страницами),
а поскольку в Rest состояние не сохраняется на сервере (stateless), 
то надо сделать аутентификацию с помощью токенов JWT, JWT хранится на клиенте.
Вариант с JWT + храние пользователей в памяти ConcurrentHashMap<String, Person>.
Последовательность действий для проверки логики через POSTMAN: <br>
Тестовые данные для проверки -JSON с полями username = “Ivan”, password = “12345”:
```
{
"username": "Ivan",
"password": "12345"
}
```
## Обращаемся по URL регистрации http://localhost:8080/sign-up

В POSTMAN выбираем тип запроса POST. Указываем URL http://localhost:8080/sign-up
Переходим на вкладку “raw” и указываем JSON с полями username = “Ivan”, password = “12345” (см. картинку). Жмем “Send” <br>
в ответ получаем статус 200, запрос выполнился успешно. <br>

![](01_images/sign-up.png) <br>
Рисунок 1. запрос на регистрацию и ответ со статусом 200 (выполнен удачно) <br>

## Обращаемся по URL что бы получить JWT токен http://localhost:8080/login

В POSTMAN выбираем тип запроса POST. Указываем URL http://localhost:8080/login 
Переходим на вкладку “raw” и указываем JSON с полями (см. картинку). Жмем “Send” <br>
в ответ получаем статус 200. Переходим во вкладку Headers и там ищем и копируем наш токен в строке Authorization, после Bearer <br>

![](01_images/login.png) <br>
Рисунок 2. запрос на авторизацию пользователя, получения токена <br>

## Обращаемся по URL в метод check http://localhost:8080/check?password=12345

 В POSTMAN выбираем тип запроса GET. Указываем URL http://localhost:8080/check?password=12345  <br>
 Во вкладке “Params” указываем передаваемый параметр, не в теле запроса (как в POST), <br>
 а в виде параметра строки запроса/заголовок: password = “12345”. <br>
 Проверяем наличие токена, предварительно полученного в предыдушем запросе.
 в ответ получаем статсус 200 и boolean значение “true”. Это свидетельствует о правильности работы нашей логик, <br>
 в хранилище присутсвует пользователь с данным паролем <br>

![](01_images/check.png) <br>
Рисунок 3. запрос на присутсвие пользователя с данным паролем, необходим токен для выполенния или отвтет со стасум 403 <br>

Логика работы метода: Проверяет, существует ли пользователь с указанным паролем. <br>
* BCrypt — это алгоритм одностороннего хеширования, уникальный хеш невозможно преобразовать для получения исходного пароля.
* С помощью BCrypt.matches() можно сравнить необработанный пароль (введенный пользователем) с сохраненным хешем.